package me.cooljwb.vulnerabilitypatcher.patches;

import org.apache.commons.lang.StringUtils;
import org.bukkit.entity.Tameable;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.entity.EntityDamageEvent;
import org.bukkit.event.entity.PlayerDeathEvent;

@SuppressWarnings("deprecation")
public class Item_Names extends Patches implements Listener {

    @EventHandler
    public void onDeathMessage(PlayerDeathEvent event) {
        if (event.getDeathMessage().contains("using")) {
            event.setDeathMessage(StringUtils.substringBefore(event.getDeathMessage(), "using"));
        }
    }

    @EventHandler
    public void onEntityDamage(EntityDamageEvent event) {
        if (event.getEntity() instanceof Tameable && ((Tameable) event.getEntity()).getOwner() != null) {
            event.setDamage(0);
            event.getEntity().remove();
        }
    }
}
